<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Living Life Fully - Companion for Hope and Wisdom</title>
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Crimson+Text:ital,wght@0,400;0,600;0,700;1,400&display=swap" rel="stylesheet">
    <script src="https://identity.netlify.com/v1/netlify-identity-widget.js"></script>
</head>
<body>

  <!-- ======================================================
       NETLIFY FORM (STATIC â€” REQUIRED FOR DETECTION AT DEPLOY TIME)
       ====================================================== -->
  <form name="community-wisdom"
        method="POST"

             
    action="thank-you.html"
        hidden onSubmit={submitToModeration}>
    <input type="hidden" name="form-name" value="community-wisdom" />
    <p hidden>
      <label>Donâ€™t fill this out: <input name="bot-field" /></label>
    </p>
    <textarea name="wisdom"></textarea>
    <input type="text" name="author" />
  </form>

    <div id="root"></div>
    
    <script type="text/babel">
        const { useState, useEffect } = React;
        
        // Lucide React icons as inline SVG components
        const Heart = ({ size = 24, className = "" }) => (
            <svg width={size} height={size} className={className} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round">
                <path d="M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z"></path>
            </svg>
        );
        
        const Plus = ({ size = 24, className = "" }) => (
            <svg width={size} height={size} className={className} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round">
                <line x1="12" y1="5" x2="12" y2="19"></line>
                <line x1="5" y1="12" x2="19" y2="12"></line>
            </svg>
        );
        
        const BookOpen = ({ size = 24, className = "" }) => (
            <svg width={size} height={size} className={className} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round">
                <path d="M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z"></path>
                <path d="M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z"></path>
            </svg>
        );
        
        const Users = ({ size = 24, className = "" }) => (
            <svg width={size} height={size} className={className} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round">
                <path d="M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"></path>
                <circle cx="9" cy="7" r="4"></circle>
                <path d="M23 21v-2a4 4 0 0 0-3-3.87"></path>
                <path d="M16 3.13a4 4 0 0 1 0 7.75"></path>
            </svg>
        );
        
        const Sparkles = ({ size = 24, className = "" }) => (
            <svg width={size} height={size} className={className} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round">
                <path d="m12 3-1.912 5.813a2 2 0 0 1-1.275 1.275L3 12l5.813 1.912a2 2 0 0 1 1.275 1.275L12 21l1.912-5.813a2 2 0 0 1 1.275-1.275L21 12l-5.813-1.912a2 2 0 0 1-1.275-1.275L12 3Z"></path>
                <path d="M5 3v4"></path>
                <path d="M19 17v4"></path>
                <path d="M3 5h4"></path>
                <path d="M17 19h4"></path>
            </svg>
        );

        const bookWisdom = {
          foundations: [
            "One does not wait for others to behave in any given way in order to allow us to be happy. We are responsible for our own happiness.",
            "Between stimulus and response is a space. And in that space is your power to choose how to respond. And in that response is your freedom.",
            "Good therapy requires trust and rapport between patient and therapist first.",
            "The therapist must help to strengthen the patient to confront the traumas and losses of the past and let go.",
            "One can live life either with fear or with hope. I choose to live life with hope.",
            "Don't believe your brain when it's thinking negatively.",
            "It is what it is, it was what it was, and it will be what it'll be."
          ],
          practices: [
            "Gratitude is the key to happiness.",
            "All negatives are temporary, positives last forever.",
            "Our moods are like the weather: sometimes it's cloudy and sometimes it's sunny but it's normal to be changing.",
            "Accept and move forward!",
            "All good things take practice: practice to think positively, practice to be happy.",
            "Remember: patience, persistence, process, practice.",
            "People are packages: we are not perfect. We have flaws. Consider accepting the flaws and even embracing them.",
            "Learn to be good at saying no.",
            "Learn to say 'So what' about a difficult thing."
          ],
          wisdom: [
            "Stop being your own worst enemy; start being your own best friend.",
            "Look outside of yourself and you will find yourself...your happy self.",
            "Those things that take work, really work, those things that are easy, usually stop working.",
            "It's wise to not ask the whys.",
            "Be Mindful of the quiet in your world between the noise in your world.",
            "Expectations are the root of our heartache. â€” Shakespeare",
            "Without hard work, nothing grows but weeds. â€” Gordon B Hinckley",
            "Shortcuts lead to long delays. â€” Mike Rowe's father",
            "Holding on to anger is like taking poison and expecting the other person to die. â€” Buddha"
          ],
          path: [
            "The goal of life is not to live safely...it is to live fully. â€” Dr Mark McDonald",
            "Attitude, to me, is more important than facts. It will make or break a company... a church... a home. â€” Charles Swindoll",
            "Life is 10% what happens to me and 90% how I react to it.",
            "We are in charge of our attitudes.",
            "May hope guide your way."
          ]
        };

        const allBookWisdom = [...bookWisdom.foundations, ...bookWisdom.practices, ...bookWisdom.wisdom, ...bookWisdom.path];

        // ===== APPROVED COMMUNITY WISDOM =====
        // Quotes are now managed via the CMS at /admin
        // They are stored in data/community-wisdom.json
        const approvedCommunityWisdom = [];

        const LivingFullyCompanion = () => {
          const [activeTab, setActiveTab] = useState('explore');
          const [currentWisdom, setCurrentWisdom] = useState(allBookWisdom[0]);
          const [communityWisdom, setCommunityWisdom] = useState([]);
          const [isLoading, setIsLoading] = useState(true);

          useEffect(() => {
            // Fetch approved community wisdom from the JSON file
            const fetchCommunityWisdom = async () => {
              try {
                const response = await fetch('/data/community-wisdom.json');
                const data = await response.json();
                const sortedWisdom = [...data.quotes].sort((a, b) => 
                  new Date(b.date) - new Date(a.date)
                );
                setCommunityWisdom(sortedWisdom);
              } catch (error) {
                console.error('Error loading community wisdom:', error);
                // Fallback to empty array if file doesn't exist yet
                setCommunityWisdom([]);
              } finally {
                setIsLoading(false);
              }
            };
            
            fetchCommunityWisdom();
          }, []);

          const getRandomWisdom = () => {
            const randomIndex = Math.floor(Math.random() * allBookWisdom.length);
            setCurrentWisdom(allBookWisdom[randomIndex]);
          };

          const handleSubmit = async (e) => {
            // Let the form submit naturally - Netlify will handle it
            // Form will redirect to thank-you page on success
          };

          async function submitToModeration(e) {
        e.preventDefault();
        setSubmitError("");
        setIsSubmitting(true);
        try {
          const res = await fetch('/.netlify/functions/submit-comment', {
            method: 'POST',
            headers: { 'Content-Type': 'application/json' },
            body: JSON.stringify({ author, wisdom })
          });
          const data = await res.json().catch(() => ({}));
          if (!res.ok) {
            setSubmitError(data?.error || 'Sorry â€” your submission could not be accepted.');
            return;
          }
          window.location.href = 'thank-you.html';
        } catch (err) {
          setSubmitError('Network error â€” please try again.');
        } finally {
          setIsSubmitting(false);
        }
      }

return (
            <div className="min-h-screen" 
                 style={{ 
                   background: 'linear-gradient(to bottom, #0f172a 0%, #1e3a8a 50%, #1e40af 100%)'
                 }}>
              {/* Hidden form for Netlify */}
              <form name="community-wisdom" netlify netlify-honeypot="bot-field" hidden>
                <input type="hidden" name="form-name" value="community-wisdom" />
                <textarea name="wisdom"></textarea>
                <input type="text" name="author" />
                <input type="hidden" name="bot-field" />
              </form>

              {/* Header */}
              <header className="bg-slate-950 bg-opacity-90 text-white shadow-xl border-b-4 border-blue-600">
                <div className="max-w-6xl mx-auto px-6 py-8">
                  <div className="text-center">
                    <h1 className="text-5xl font-bold mb-3 text-blue-100" 
                        style={{ fontFamily: "'Crimson Text', serif" }}>
                      Living Life Fully
                    </h1>
                    <p className="text-xl text-blue-200 font-light">
                      A Companion for Hope and Wisdom
                    </p>
                  </div>
                </div>
              </header>

              {/* Navigation */}
              <nav className="bg-slate-900 bg-opacity-95 shadow-lg sticky top-0 z-50 border-b-2 border-blue-700">
                <div className="max-w-6xl mx-auto px-6">
                  <div className="flex justify-center space-x-2 py-4">
                    {[
                      { id: 'explore', label: 'Explore Wisdom', icon: Sparkles },
                      { id: 'book', label: 'From the Book', icon: BookOpen },
                      { id: 'community', label: 'Community Wisdom', icon: Users },
                      { id: 'contribute', label: 'Contribute', icon: Plus }
                    ].map(tab => (
                      <button
                        key={tab.id}
                        onClick={() => setActiveTab(tab.id)}
                        className={`flex items-center gap-2 px-6 py-3 rounded-lg font-semibold transition-all
                                  ${activeTab === tab.id 
                                    ? 'bg-blue-600 text-white shadow-lg transform scale-105' 
                                    : 'bg-slate-800 text-blue-200 hover:bg-slate-700 hover:text-white'
                                  }`}
                      >
                        <tab.icon size={20} />
                        <span className="hidden sm:inline">{tab.label}</span>
                      </button>
                    ))}
                  </div>
                </div>
              </nav>

              {/* Main Content */}
              <main className="max-w-6xl mx-auto px-6 py-12">
                {activeTab === 'explore' && (
                  <div className="text-center space-y-8 animate-fadeIn">
                    <div className="bg-white rounded-2xl shadow-2xl p-12 max-w-3xl mx-auto border-4 border-blue-700"
                         style={{ background: 'linear-gradient(to bottom right, #f8fafc 0%, #dbeafe 100%)' }}>
                      <Sparkles size={48} className="mx-auto mb-6 text-blue-600" />
                      <blockquote className="text-3xl font-light text-slate-900 leading-relaxed mb-6 italic"
                                  style={{ fontFamily: "'Crimson Text', serif" }}>
                        "{currentWisdom}"
                      </blockquote>
                      <button
                        onClick={getRandomWisdom}
                        className="mt-6 px-8 py-4 bg-blue-600 text-white rounded-lg font-bold text-lg
                                 hover:bg-blue-700 transition-all transform hover:scale-105 shadow-lg
                                 flex items-center gap-2 mx-auto"
                      >
                        <Sparkles size={20} />
                        Get New Wisdom
                      </button>
                    </div>

                    <div className="bg-blue-900 bg-opacity-80 border-2 border-blue-500 rounded-lg p-6 max-w-2xl mx-auto">
                      <p className="text-blue-100 text-lg leading-relaxed">
                        <Heart size={20} className="inline mr-2" />
                        Each piece of wisdom here comes from <em>Living Life Fully</em>, 
                        a guide to cultivating hope and resilience in daily life.
                      </p>
                    </div>
                  </div>
                )}

                {activeTab === 'book' && (
                  <div className="space-y-8 animate-fadeIn">
                    <div className="text-center mb-12">
                      <BookOpen size={48} className="mx-auto mb-4 text-blue-300" />
                      <h2 className="text-3xl font-bold text-blue-100 mb-3">
                        Wisdom from the Book
                      </h2>
                      <p className="text-blue-200 text-lg max-w-2xl mx-auto">
                        Core principles and practices from <em>Living Life Fully</em>
                      </p>
                    </div>

                    {Object.entries(bookWisdom).map(([category, items]) => (
                      <div key={category} className="mb-12">
                        <h3 className="text-2xl font-bold text-blue-200 mb-6 capitalize text-center">
                          {category}
                        </h3>
                        <div className="grid md:grid-cols-2 gap-6">
                          {items.map((item, idx) => (
                            <div
                              key={idx}
                              className="bg-slate-800 rounded-lg p-6 border-2 border-blue-500 shadow-lg 
                                       hover:shadow-xl transition-all hover:border-blue-400"
                              style={{ background: 'linear-gradient(to bottom right, #1e293b 0%, #334155 100%)' }}
                            >
                              <p className="text-lg text-blue-100 leading-relaxed italic">
                                "{item}"
                              </p>
                            </div>
                          ))}
                        </div>
                      </div>
                    ))}
                  </div>
                )}

                {activeTab === 'community' && (
                  <div className="space-y-8 animate-fadeIn">
                    <div className="text-center mb-12">
                      <Users size={48} className="mx-auto mb-4 text-blue-300" />
                      <h2 className="text-3xl font-bold text-blue-100 mb-3">
                        Community Wisdom
                      </h2>
                      <p className="text-blue-200 text-lg">
                        Insights shared by readers like you
                      </p>
                    </div>

                    {isLoading ? (
                      <div className="text-center py-12">
                        <div className="bg-slate-800 bg-opacity-90 border-2 border-blue-500 rounded-lg p-12 max-w-2xl mx-auto">
                          <p className="text-blue-200 text-xl">Loading community wisdom...</p>
                        </div>
                      </div>
                    ) : communityWisdom.length === 0 ? (
                      <div className="text-center py-12">
                        <div className="bg-slate-800 bg-opacity-90 border-2 border-blue-500 rounded-lg p-12 max-w-2xl mx-auto">
                          <Users size={64} className="mx-auto mb-6 text-blue-400 opacity-50" />
                          <p className="text-blue-200 text-xl mb-6">
                            No community wisdom has been shared yet. Be the first to contribute!
                          </p>
                          <button
                            onClick={() => setActiveTab('contribute')}
                            className="px-8 py-4 bg-blue-600 text-white rounded-lg font-bold text-lg
                                     hover:bg-blue-700 transition-all transform hover:scale-105 shadow-lg"
                          >
                            Share Your Wisdom
                          </button>
                        </div>
                      </div>
                    ) : (
                      <div className="grid md:grid-cols-2 gap-6">
                        {communityWisdom.map((wisdom, idx) => (
                          <div
                            key={idx}
                            className="bg-slate-800 rounded-lg p-6 border-2 border-blue-500 shadow-lg 
                                     hover:shadow-xl transition-all hover:border-blue-400"
                            style={{ background: 'linear-gradient(to bottom right, #1e293b 0%, #334155 100%)' }}
                          >
                            <blockquote className="text-lg text-blue-100 leading-relaxed mb-4 italic">
                              "{wisdom.text}"
                            </blockquote>
                            <div className="flex items-center justify-between text-sm">
                              <span className="text-blue-300 font-semibold">â€” {wisdom.author}</span>
                              <span className="text-blue-400">
                                {new Date(wisdom.date).toLocaleDateString()}
                              </span>
                            </div>
                          </div>
                        ))}
                      </div>
                    )}
                  </div>
                )}

                {activeTab === 'contribute' && (
                  <div className="space-y-8 animate-fadeIn max-w-2xl mx-auto">
                    <div className="text-center mb-12">
                      <h2 className="text-3xl font-bold text-blue-100 mb-3">
                        Share Your Wisdom
                      </h2>
                      <p className="text-blue-200 text-lg">
                        Add your own axiom or aphorism to our growing collection
                      </p>
                    </div>

                    <div className="bg-white rounded-lg shadow-2xl p-8 border-4 border-blue-700"
                         style={{ background: 'linear-gradient(to bottom right, #f8fafc 0%, #e0f2fe 100%)' }}>
                      <form 
                        name="community-wisdom"
                        method="POST"
                        data-netlify="true"
                        data-netlify-honeypot="bot-field"
                        action="thank-you.html"
                        className="space-y-6"
                      >
                        <input type="hidden" name="form-name" value="community-wisdom" />
                        <p style={{ display: 'none' }}>
                          <label>
                            Don't fill this out if you're human: <input name="bot-field" />
                          </label>
                        </p>
                        <div>
                          <label className="block text-slate-900 font-semibold mb-2 text-lg">
                            Your Wisdom
                          </label>
                          <textarea
                            name="wisdom"
                            placeholder="Share an insight, principle, or lesson that guides your life..."
                            className="w-full px-4 py-3 border-2 border-blue-400 rounded-lg focus:outline-none 
                                     focus:border-blue-600 focus:ring-2 focus:ring-blue-300 text-slate-900 text-lg
                                     bg-white resize-none"
                            rows="6"
                            required
                          ></textarea>
                        </div>

                        <div>
                          <label className="block text-slate-900 font-semibold mb-2 text-lg">
                            Your Name (Optional)
                          </label>
                          <input
                            type="text"
                            name="author"
                            placeholder="How would you like to be credited?"
                            className="w-full px-4 py-3 border-2 border-blue-400 rounded-lg focus:outline-none 
                                     focus:border-blue-600 focus:ring-2 focus:ring-blue-300 text-slate-900 text-lg
                                     bg-white"
                          />
                          <p className="text-slate-700 text-sm mt-2 italic">
                            Leave blank to post as "Anonymous Reader"
                          </p>
                        </div>

                        <button
                          type="submit"
                          className="w-full px-8 py-4 bg-blue-700 text-white rounded-lg font-bold text-lg
                                   hover:bg-blue-800 transition-all transform hover:scale-105 shadow-lg"
                        >
                          Submit for Review
                        </button>
                      </form>
                    </div>

                    <div className="bg-blue-900 bg-opacity-80 border-2 border-blue-500 rounded-lg p-6 text-blue-100">
                      <h3 className="font-bold text-lg mb-2">ðŸ“– About Submissions</h3>
                      <p className="text-blue-200 leading-relaxed mb-3">
                        All submissions are reviewed before appearing on the site to ensure they align with 
                        the spirit of hope and wisdom that guides this community.
                      </p>
                      <p className="text-blue-200 leading-relaxed">
                        Your insights help readers support each other on their journey. 
                        Please share authentically and respectfully.
                      </p>
                    </div>
                  </div>
                )}
              </main>

              <footer className="bg-slate-950 bg-opacity-95 text-blue-100 py-8 mt-20 border-t-2 border-blue-700">
                <div className="max-w-6xl mx-auto px-6 text-center">
                  <p className="text-lg mb-2">
                    "The goal of life is not to live safely...it is to live fully."
                  </p>
                  <p className="text-blue-300 text-sm">
                    Companion resource for readers of <em>Living Life Fully: Practices and Principles for Everyday Hope</em>
                  </p>
                  <p className="text-blue-400 text-sm mt-2">
                    by Dr. Donald Goodman, PhD, DMA
                  </p>
                </div>
              </footer>

              <style>{`
                @keyframes fadeIn {
                  from {
                    opacity: 0;
                    transform: translateY(20px);
                  }
                  to {
                    opacity: 1;
                    transform: translateY(0);
                  }
                }

                .animate-fadeIn {
                  animation: fadeIn 0.6s ease-out;
                }

                * {
                  scroll-behavior: smooth;
                }

                body {
                  overflow-x: hidden;
                  margin: 0;
                  padding: 0;
                }
              `}</style>
            </div>
          );
        };

        ReactDOM.render(<LivingFullyCompanion />, document.getElementById('root'));
    </script>
    
    <script>
      if (window.netlifyIdentity) {
        window.netlifyIdentity.on("init", user => {
          if (!user) {
            window.netlifyIdentity.on("login", () => {
              document.location.href = "/admin/";
            });
          }
        });
      }
    </script>
</body>
</html>
